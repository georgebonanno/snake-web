<html>
<body>

	<canvas id="snakeGameCanvas" width="800" height="800" style="border:1px solid #000000;">

	</canvas>
	<script type="text/javascript">
		
		function move(direction) {
			ctx.moveTo(posx,posy);
			var nposy=posy;
			var nposx=posx;
			switch (direction) {
				case 'N':
						nposy=posy-5;
						break;
				case 'S':
						nposy=posy+5;
						break;
				case 'E':
						nposx=posx-5;
						break;
				case 'W':
						nposx=posx+5;
						break;
				default:
						throw "undefined direction: "+direction;
			}
			ctx.lineTo(nposx,nposy);
			ctx.moveTo(nposx,nposy);
			posx=nposx;
			posy=nposy;
			console.log(`moving to ${posx},${posy}`)
			ctx.stroke();
		}

		var canvas=document.getElementById('snakeGameCanvas');
		var ctx=canvas.getContext("2d");
		posx=canvas.width/2;
		posy=canvas.width/2;
		direction='S'
		ctx.moveTo(posx,posy);


		console.log("adding listener....");
		document.addEventListener("keydown",event => {
			console.log(`key down: ${event.keyCode}`);
			switch (event.keyCode) {
				case 38:
					if (direction != 'S') {
						direction = 'N';
					}	
					break;
				case 39:
					if (direction != 'E') {
						direction = 'W';
					}
					break;
				case 40:
					if (direction != 'N') {
						direction = 'S';
					}
					break;
				case 37:
					if (direction != 'W') {
						direction = 'E';
					}
					break;
				default:
					break;
			};
			console.log(`new direction: ${direction}`);
		})

		console.log(`posx: ${posx}`)
		setInterval(() => move(direction),100);



	</script>
</body>
</html>